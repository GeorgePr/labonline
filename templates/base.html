<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
   <link rel="preconnect" href="https://fonts.gstatic.com">
   <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
   <script src="//code.jquery.com/jquery-1.10.2.js"></script>
   <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
   

   {% block head %}{% endblock %}
</head>
<body>
   <h2><a href={{ url_for('index') }}>LabOnLine</a></h2>

   <table id="active_table_r">
      {% for p in range(session['active_r']|length): %}
      <tr>
         <td><h4>{{ (session['active_r'][p])|string }}</h4></td>
      </tr>
      <tr>
         <td>
            {% set dom = session['active_r'][p]|string %}
            <script>
               $(document).ready(function(){
                  var domain = "{{ dom }}";
                  console.log(domain);
                  var status_r = "{{ status_r|safe }}";
                  var status = new Array();
                  len = status_r.length;
                  var j = 0;
                  for (i=2;i<len;i=i+5) {
                     if (status_r[i] == '5') {
                        status[j] = status_r[i];
                        $("#shutdown_" + domain).attr("disabled", "disabled");
                        $("#console_" + domain).attr("disabled", "disabled");
                     }
                     if (status_r[i] == '1') {
                        status[j] = status_r[i];
                        $("#start_" + domain).attr("disabled", "disabled");
                     }
                     j = j++;
                     console.log(status);
                  }
               });
            </script>
            <form target="_blank" action="{{ url_for('xterm', domain = dom) }}" method="POST">
               <input type="submit" id="console_{{ dom }}" value="Console"></input>
            </form>
            <form action="{{ url_for('domain_start', domain = dom) }}" method="POST">
               <input type="submit" id="start_{{ dom }}" value="Start"></input>
            </form>
            <form action="{{ url_for('domain_shutdown', domain = dom) }}" method="POST">
               <input type="submit" id="shutdown_{{ dom }}" value="Shutdown"></input>
            </form>
            <form action="{{ url_for('domain_remove', domain = dom) }}" method="POST">
               <input type="submit" value="Remove"></input>
            </form><br />
            <p1>Number of interfaces: {{ active_net_r[p] }}</p1>
            {% for i in range((active_net_r[p])|int): %}
               <br /><p1>{{ session['active_netconf'][p][i] }}</p1>
            {% endfor %}
         </td>
      </tr>
      {% endfor %}
   </table>
   <table id="active_table_pc">
      {% for p in range(session['active_pc']|length): %}
      <tr>
         <td><h4>R{{ (session['active_pc'][p])|string }}</h4></td>
      </tr>
      <tr>
         <td>
            {% set dom = 'PC' + session['active_pc'][p]|string %}
            <form target="_blank" action="{{ url_for('xterm', domain = dom) }}" method="POST">
               <input type="submit" id="console_{{ p+1 }}" value="Console"></input>
            </form>
            <form action="{{ url_for('domain_start', domain = dom) }}" method="POST">
               <input type="submit" id="start_{{ p+1 }}" value="Start"></input>
            </form>
            <form action="{{ url_for('domain_shutdown', domain = dom) }}" method="POST">
               <input type="submit" id="shutdown_{{ p+1 }}" value="Shutdown"></input>
            </form>
            <form action="{{ url_for('domain_remove', domain = dom) }}" method="POST">
               <input type="submit" value="Remove"></input>
            </form><br />
            <p1>Number of interfaces: {{ active_net_pc[p] }}</p1>
            {% for i in range((active_net_pc[p])|int): %}
               <br /><p1>{{ session['active_netconf_pc'][p][i] }}</p1>
            {% endfor %}
         </td>
      </tr>
      {% endfor %}
   </table>

   {% block body %}{% endblock %}
   
</body>
</html>